# D3.3. SQL. Назначение, особенности, диалекты

Язык SQL выглядит достаточно архаичным и, в общем-то, таковым и является. 
Дело в том, что SQL весьма узкоспециализирован и предназначен только для работы с данными в рамках табличной модели. 
И, поскольку сама табличная модель почти не изменилась, почти не изменился и SQL с 80-х годов XX века, когда появился 
первый стандарт языка. Процесс разработки на SQL также соответствует тому периоду.

Тем не менее возможностей языка для задач манипулирования данными вполне хватает, да и кое-какие средства разработки 
также есть. В следующей главе мы как раз разберём некоторые из них.

Операторы (команды) языка SQL принято в соответствии со стандартом разделять на несколько групп. Нас будут интересовать 
только два основных подмножества — DDL (data definition language — язык описания структуры данных) и 
DML (data manipulation language — язык манипулирования данными). Первая группа операторов предназначена 
для работы с базами данных и их объектами как таковыми, а вторая — для работы с самими данными.

DDL предназначен для создания, изменения и удаления самих БД и их объектов — таблиц, индексов, последовательностей, 
представлений, ограничений и так далее.

DML предназначен для работы с самими данными, которые хранятся в БД. 
DML позволяет читать данные из БД, изменять их, удалять и создавать новые записи. DML всегда работает со строками в таблицах БД.

Иногда также выделяют и другие подмножества SQL, вроде DCL (data control language), 
которое используется для административных функций: работы с учётными записями и ролями, 
предоставления прав на объекты БД. Нам подобные возможности на данном этапе не интересны.

Программа на языке SQL называется запросом. Запрос состоит из одного или нескольких операторов. 
Операторы в SQL похожи на встроенные функции в других языках программирования и предназначены для 
выполнения некоторого действия с данными, объектом БД или самой БД

Запросы могут создавать БД, добавлять или удалять таблицы, читать все или часть данных из нескольких таблиц, 
добавлять или изменять данные и так далее.

-- Создание таблицы "Товары".
```
CREATE TABLE products (
    id BIGSERIAL PRIMARY KEY, -- первичный ключ
    name TEXT NOT NULL, -- название товара
    price INT CHECK(price > 0), -- цена (гарантируется, что цена > 0)
    vendor_id BIGINT REFERENCES vendors(id), -- ссылка на продавца
    manufacturer_id BIGINT REFERENCES manufacturers(id) -- ссылка на производителя
);
```

В SQL не так много операторов. В DDL их только три. В DML — четыре. 
Эти семь операторов покрывают все потребности по работе с объектами и данными БД. 
Операторов немного, но каждый из них имеет свою непростую структуру и синтаксис. 
Далее в таблице приведём сводную информацию по всем операторам, которые мы будем изучать в данном модуле.



Подмножество	Оператор	Описание
--------------------------------------------------------
DDL	            CREATE	    Создаёт БД или объект БД 
                            (таблицы, индексы, триггеры и так далее).
---------------------------------------------------------
DDL	            ALTER	    Изменяет объект БД.
---------------------------------------------------------
DDL	            DROP    	Удаляет БД или объект БД
--------------------------------------------------------
DML         	SELECT	    Чтение набора строк из одной или нескольких таблиц БД.
---------------------------------------------------------------------
DML	            INSERT	    Создание новой записи (строки) в таблице БД.
---------------------------------------------------------------------
DML         	UPDATE	    Обновление строки в таблице БД.
---------------------------------------------------------------------
DML	            DELETE	    Удаление строки из таблицы БД
---------------------------------------------------------------------

Важно! Различные СУБД реализуют свой «диалект» языка SQL. 
При этом базовые возможности, указанные в таблице выше, остаются неизменными (хотя синтаксис может немного различаться). 
А вот дополнительные возможности сильно различаются между разными СУБД. Например, алгоритмы индексирования или названия 
типов данных в PostgreSQL и Microsoft SQL Server могут отличаться значительно. В данном курсе мы используем PostgreSQL, 
но сведения из данного модуля по большей части применимы ко всем РСУБД

Примечание. Помимо указанных операторов, в языке SQL существует большое количество встроенных функций: 
для работы со временем, для работы с JSON, для вычисления статистических значений, математические функции, 
логические операторы и так далее. Набор доступных функций сильно зависит от выбранной СУБД.

Язык SQL обладает рядом особенностей синтаксиса, о которых стоит помнить. Самые важные из них:

SQL не чувствителен к регистру. То есть оператор SELECT можно записать как select, Select или даже sElECt. 
Однако принято все операторы и ключевые слова писать большими буквами, а все имена объектов и функций — маленькими. 
Придерживайтесь этого правила.
Каждый оператор должен заканчиваться точкой с запятой. Если вы её не поставите, будет ошибка, и запрос не выполнится.
Строки заключаются в одиночные кавычки