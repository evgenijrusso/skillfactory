#  D2.11. Основные объекты БД
Современные БД состоят из объектов разных типов. Основной объект, таблицы, мы уже рассмотрели. 
Однако это далеко не единственный возможный объект в БД.

Давайте посмотрим, из чего же состоит БД в системе PostgreSQL.

### Таблицы
Таблицы содержат данные, которые хранятся в БД. Это основной объект.

### Индексы
Индексы используются для увеличения производительности в операциях поиска и выборки данных. 
Индексы подобны алфавитному указателю в книгах. Они позволяют быстро найти нужную запись в таблице. 
Рекомендуем почитать про индексы здесь.

Индексы применяются к конкретной таблице. 
Каждой записи в таблице сопоставляется уникальный идентификатор. 
Эти идентификаторы, в отличие от записей, отсортированы и позволяют быстро найти нужную запись.

Индексы мы будем подробнее рассматривать далее. 
Пока что представьте себе телефонный справочник. Номера телефонов не упорядочены, но справочник упорядочен по алфавиту, 
по именам абонентов. Мы можем быстро, в пару движений, перейти к нужной букве и найти нужного абонента. 
Здесь номера телефонов — записи таблицы, а отсортированные имена абонентов — индекс.

Другой пример: алфавитный указатель в книге позволяет быстро перейти к странице с термином. 
Здесь страницы текста — записи в БД, указатель — индекс.

### Последовательности
Последовательность — объект БД, предназначенный для генерации значений, которые используются в качестве 
значений полей в записях таблицы.

Наиболее часто последовательности используются для получения значения первичного ключа при создании новой записи. 
В этом случае последовательность при каждом вызове возвращает число, увеличенное на 1. Это число используется 
как значение ПК для новой записи, и таким образом достигается уникальность. Такой механизм избавляет программиста 
от необходимости заботиться о значениях ПК — они генерируются последовательностью и вставляются в БД автоматически.

### Ограничения
Ограничение — объект БД, предназначенный для проверки значений полей таблиц при их создании и изменении.

Например, мы можем потребовать от БД проверять уникальность значений в поле email для пользователей или требовать, 
чтобы поле Фамилия не было пустым. БД сама будет проверять корректность данных и генерировать ошибки при нарушении ограничений.

### Хранимые процедуры

Современные БД позволяют программировать на уровне самой БД (формально — на уровне СУБД), то есть БД 
содержат средства компиляции программного кода. Поэтому можно часть алгоритмов вынести на уровень БД. 
Такие блоки кода обычно оформляются в виде отдельных процедур, компилируются базой данных и хранятся в 
ней вместе с данными. Отсюда и название — хранимые процедуры.

Дальше такие функции можно вызывать по имени, как в любом языке программирования.

Затем в разделе мы обсудим, почему эти объекты не стоит использовать без крайней необходимости.

### Триггеры

Триггер — это объект БД, представляющий собой механизм вызова некоторой процедуры при наступлении некоторого события. 
Событием может быть создание, удаление или изменение записи таблицы. Триггеры применяются к конкретной таблице.

Например, можно создать триггер, который будет вести статистику: при каждом добавлении или изменении товара в таблице 
товаров в другой таблице будет изменяться счётчик числа товаров и их средняя цена.

### Представления (view)

Представление — это виртуальная таблица, которая обычно содержит связанные данные из нескольких таблиц 
и используется для удобства запросов данных.

### --- Давайте подберём объекты, которые нам пригодятся в БД «Каталог товаров»: --------------

Таблицы. Тут всё в соответствии со схемой: товары, продавцы, производители, категории, товары_категории (связь).
Индексы. Индексы ускоряют поиск. С помощью индексов линейная сложность поиска (в терминах О-нотации) превращается в 
логарифмическую или даже константную. Нам нужно искать товары по категориям, продавцам, цене, производителям. 
Для всех этих полей нам потребуется индекс. Для других таблиц индексы на данном этапе не требуются.
Последовательности. Для каждого идентификатора (ПК) будет автоматически создана инкрементальная последовательность. 
Для нас этого достаточно.
Ограничения. Название товара, как и названия производителей, продавцов и категорий, не должны быть пустыми. 
Цена должна быть больше нуля. Эти минимальные ограничения мы должны заложить в схему нашей БД.
Хранимых процедур, триггеров и представлений на данном этапе у нас не будет.