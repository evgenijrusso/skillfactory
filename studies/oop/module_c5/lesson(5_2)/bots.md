# Боты Telegram - это специальные аккаунты, для настройки которых не требуется номер телефона. 

Боты подключены к серверу своего владельца, который обрабатывает вводимые данные и запросы от пользователей.

Сервер-посредник Telegram обрабатывает все шифрование и обмен данными с Telegram API. Разработчики взаимодействуют с этим сервером через простой HTTPS-интерфейс с упрощенной версией Telegram API, известной как Bot API.

Чем боты отличаются от пользователей?
Боты способны обрабатывать входные данные и запросы способами, недоступными учетным записям пользователей, но есть несколько различий между ботом и обычным пользователем.

У ботов нет статусов "видели в последний раз" или "онлайн" – вместо этого они показывают в чате ярлык "бот".
У ботов ограниченное облачное хранилище – старые сообщения могут быть удалены сервером вскоре после их обработки.
Боты не могут начинать переписку с пользователями. Пользователь должен либо добавить их в группу, либо сначала отправить им сообщение. Люди могут искать имя пользователя вашего бота или начать чат по его уникальной t.me/bot_username ссылке.
По умолчанию боты, добавленные в группы, видят только соответствующие сообщения в чате (см. Режим конфиденциальности).
Боты никогда не едят, не спят и не жалуются (если специально не запрограммировано иное).
Ссылки на ботов
Для имен пользователей ботов обычно требуется суффикс "бот", но у некоторых ботов его нет – таких как @stickers, @gif, @wiki или @bing.

Каждый может присваивать ботам коллекционные имена пользователей, в том числе без суффикса "бот".

Как мне создать бота?
Создавать ботов Telegram очень просто, но вам понадобятся хотя бы некоторые навыки в компьютерном программировании.

Создание бота упрощается с помощью Telegram Bot API, который предоставляет инструменты и фреймворк, необходимые для интеграции вашего кода. Чтобы начать, напишите @BotFather в Telegram, чтобы зарегистрировать своего бота и получить его токен аутентификации.

Ваш токен бота является его уникальным идентификатором – храните его в безопасном месте и делитесь им только с теми, кому нужен прямой доступ к боту. Каждый, у кого есть ваш токен, будет иметь полный контроль над вашим ботом.

## Создание нового бота (BotFather)  проба
- Ура, новый бот. Как мы будем это называть? Пожалуйста, выберите имя для своего бота.
- echotestboy
- Хороший. Теперь давайте выберем имя пользователя для вашего бота. Оно должно заканчиваться на «bot». Вот так, например: TetrisBot или tetris_bot.
- echoMyTestBot
- получаем сообщение от BotFather и копируем токен 6722947629:AAEzvXAMp8j4yRQSjSl6SRnPgMv3InlAass.
Все. Потом удалил бот.
## Последовательность: 
1. Используйте команду /newbot, чтобы создать нового бота.
Затем необходимо:

2. Установить имя (name) вашего бота.
Имя вашего бота отображается в контактной информации и в других местах.
3. Установить имя пользователя (username) вашего бота.
Имя пользователя — это короткое имя, которое будет использоваться для идентификации вашего бота и обращения к нему. Имена пользователей состоят из 5–32 символов и нечувствительны к регистру, могут включать только латинские символы, числа и символы подчёркивания. Имя пользователя вашего бота должно заканчиваться на «bot», например, «tetris_bot» или «TetrisBot».
4. Получить токен (token).
Токен представляет собой строку вида 110201543:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw. Он необходим для авторизации (подтверждения, что именно вы владелец этого бота, чтобы в программе было понятно, к какому именно боту привязываются все обработчики) вашей программы, в которой реализована логика бота. Токен — это пароль от вашего бота, поэтому храните свой токен в безопасности.

1. 
- Bot: NemoSkillFactory
- username: Seraphim700Bot
- token: 6717574574:AAFhQn2vTT27HWn8cZZ1d1-Ug7Vaps_lKIk

2.
- Bot: NemoSkillFactory
- username: Seraphim700_Bot
- token: '6663856800:AAHqIFd8K6fIKiL54HtvDChlp_-P6ebZ9Uk'

[Создание  Python Telegram-бота](https://apps.skillfactory.ru/learning/course/course-v1:SkillFactory+PDEV+2021/block-v1:SkillFactory+PDEV+2021+type@sequential+block@0b42c85796354a028742056683919ac4/block-v1:SkillFactory+PDEV+2021+type@vertical+block@8fc552b5685a4fd5a43a92774eb6a1fb)

После того как мы получили токен для доступа к боту, можно приступать к созданию скрипта, который будет реализовывать всю логику Телеграм-бота. Но перед этим необходимо изучить некоторые типы данных, которыми API Bot позволяет оперировать.
Первое, с чем нам необходимо познакомиться, это доступная информация о чатах. API Bot даёт доступ к множеству объектов, с которыми он работает.
Мы разберём два основных:
- чат,
- сообщение.

Все сообщения в Telegram приходят в какой-либо чат. 
Чтобы его идентифицировать, например, для того, чтобы отправить ответное сообщение, необходимо знать его id. 
Также можно определить тип чата и реализовать различную логику для моментов, когда бот будет использоваться в личных сообщениях или групповых чатах. 
Username может использоваться для приветствия и обращения к пользователю.

Можно реализовать различную обработку сообщений с соответствующим контентом.

Чтобы взаимодействовать с этими объектами, в Python есть специальная библиотека pyTelegramBotAPI. 
Установить её вы можете с помощью команды: `pip install pyTelegramBotAPI`

После установки необходимо создать новый файл, импортировать туда модуль telebot и создать объект bot, используя токен, полученный при регистрации.
```py
import telebot
TOKEN = "Токен, полученный при регистрации"
bot = telebot.TeleBot(TOKEN)
```
Чтобы запустить бота, нужно воспользоваться методом polling.

`bot.polling(none_stop=True)`

## Обработчики сообщений
Обработчик сообщений — это функция, которая будет выполняться при получении определённого сообщения.
Для того чтобы из обычной функции сделать обработчик сообщений для бота, надо воспользоваться декоратором @bot.message_handler. Обработчики сообщений состоят из одного или нескольких фильтров.

Обработчик сообщений объявляется следующим образом (при условии, что bot — это экземпляр класса TeleBot):
```
import telebot
TOKEN = "Токен, полученный при регистрации"
bot = telebot.TeleBot(TOKEN)
 
@bot.message_handler(filters)
def function_name(message):
    bot.reply_to(message, "This is a message handler"
```




Аркадий Хазанов | Ментор

14:22
Добрый день, коллеги!

Найти нужный API для этого задания очень просто. Можно брать практически любой с первой страницы поисковика. 
Пробуем: exchange rates api free (у вас выдача может отличаться)

Смотрим:
🔸 ApiLayer — удобный, с детальной документацией
🔸 Exchangerates — неудобный, бесплатный тариф ограничен по функционалу
🔸 exchangerate.host — классный, лаконичный, не требует регистрации
🔸 fixer.io — хорошая документация, UPD: бесплатный тариф ограничен по функционалу
🔸 currencyapi — существует в виде библиотеки для Python, но может быть сложнее для понимания
🔸 CryptoCompare — суперудобная документация, не требует


@Аркадий_Хазанов_ментор import telebot
import requests
import json


TOKEN = '**'


bot = telebot.TeleBot(TOKEN)

keys = {
    'доллар': 'USD',
    'евро' : 'EUR' ,
    'рубль': 'RUB' ,
}

@bot.message_handler(commands=['start', 'help'])
def help(message: telebot.types.Message):
    text = 'Чтобы начать работу введите команду боту в следующем формате:\n<имя валюты> \
<в какую валюту перевести> \
<количество валюты>\nУвидеть список всех доступных валют: /values'
    bot.reply_to(message,text)


@bot.message_handler(commands=['values'])
def values(message: telebot.types.Message):
    text = 'Доступные валюты:'
    for key in keys.keys():
       text = '\n'.join((text, key, ))
    bot.reply_to(message, text)



@bot.message_handler(content_types=['text', ])
def convert(message: telebot.types.Message):
    quote, base, amount = message.text.split(' ')
    r = requests.get(f'https://min-api.cryptocompare.com/data/price?fsym={keys[quote]}&tsyms={keys[base]}')
    total_base = json.loads(r.content)[keys[base]]
    text = f'Цена {amount} {quote} в {base} - {total_base}'
    bot.send_message(message.chat.id, text)


bot.polling()     у меня почему то выдает цену за 1 даже если выбрать 100